<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/jquery.fancytree/dist/skin-lion/ui.fancytree.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.fancytree/dist/jquery.fancytree-all-deps.min.js"></script>
</head>

<body>
    <div id="tree"></div>

    <script>
        $("#tree").fancytree({
            source: { url: "{{url_for('tree', vault=vault)}}/" },
            lazyLoad: function (event, data) {
                let node = data.node;
                data.result = { url: "{{url_for('tree', vault=vault)}}/" + encodeURIComponent(node.key) };
            },
            activate: function (event, data) {
                let node = data.node;
                if (!node.folder) {
                    // например, редирект в редактор
                    window.location.href = "/open?file=" + encodeURIComponent(node.key);
                }
            }
        });
    </script>
</body>

</html>